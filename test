<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>PDFテスト</title>
  <!-- jsPDF & autoTable 読み込み -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
  <h2>PDF出力テスト</h2>
  <button onclick="downloadPDF()">PDFをダウンロード</button>

  <script>
  function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    doc.setFontSize(16);
    doc.text("アンケート結果", 14, 20);

    // ダミーデータ
    const results = {
      wordAccuracy: 80,
      stroopAvgTime: 1234,
      stroopAccuracy: 92,
      wordAnswers: ["apple", "banana", "orange"]
    };

    const tableData = [
      ["項目", "結果"],
      ["単語リスト正答率", results.wordAccuracy + "%"],
      ["ストループ課題平均反応時間", results.stroopAvgTime + " ms"],
      ["ストループ課題正答率", results.stroopAccuracy + "%"],
      ["単語テスト回答内容", results.wordAnswers.join(", ")]
    ];

    doc.autoTable({
      head: [tableData[0]],
      body: tableData.slice(1),
      startY: 30
    });

    doc.save("results.pdf");
  }
  </script>
</body>
</html>
